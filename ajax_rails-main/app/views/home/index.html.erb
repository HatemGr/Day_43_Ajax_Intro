<h1 class="text-center mb-4">Welcome to my todolist app</h1>
<%= render 'layouts/task_form'  %>
<div class="container">
  <ul>

    <div class="uncompleted">
      <h2> Uncompleted tasks </h2>
      <% @categories.each do  |category|%>
      <li><%= category.title  %></li>
      <div class="card">
        <ul id="task-list-<%= category.title %>">
          <% category.uncompleted_tasks.each do |task|  %>
          <li id="task-list-<%= task.id %>">
            <%= task.title  %>
            <% unless task.deadline.nil? %>
              , to read: <%= task.deadline.strftime('%D')  %>
            <% end %>
            <%= button_to "Delete this task", task_path(task), class: "btn btn-danger" , method: :delete, remote: true %>
            <%= check_box_tag :task_status, 1, task.status , data: { remote: true, url: task_path(task), params: { tag_id: "task-list-#{task.id}"}.to_param, method: "put" }%>
          </li>
          <% end %>
        </ul>
      </div>
      <% end %>
    </div>
    
    <div class="completed">
      <h2> Completed tasks </h2>
      <% @categories.each do  |category|%>
      <li><%= category.title  %></li>
      <div class="card">
        <ul id="task-list-<%= category.title %>">
          <% category.completed_tasks.each do |task|  %>
          <li id="task-list-<%= task.id %>">
            <%= task.title  %>
            <% unless task.deadline.nil? %>
              , to read: <%= task.deadline.strftime('%D')  %>
            <% end %>
            <%= button_to "Delete this task", task_path(task), class: "btn btn-danger" , method: :delete, remote: true %>
            <%= check_box_tag :task_status, 1, task.status , data: { remote: true, url: task_path(task), params: { tag_id: "task-list-#{task.id }"}.to_param, method: "put" }%>
          </li>
          <% end %>
        </ul>
      </div>
      <% end %>
    </div>
  
  </ul>
</div>


<div class="container">
  <div class="row">
    <% @tasks.each do |task|  %>
      <div class="card col-3">
        <% unless task.image.nil? %>
          <%= image_tag task.image, class: "rounded-circle" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
